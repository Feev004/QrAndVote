<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard User Vote</title>
    <link rel="stylesheet" href="./css/bootstrap.min.css" />
    <style>
      body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: url("/frontend/img/844163_0.jpg") center center/cover
          no-repeat;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: 100%;
      }

      .card-me {
        position: relative;
        /* width: 375px; */
        border-radius: 10px;
        overflow: hidden;
        background-color: rgba(255, 255, 255, 0.8);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
        transition: transform 0.3s ease;
      }

      .overlay {
        background-color: rgba(255, 255, 255, 0.9);
        padding: 20px;
        text-align: center;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100%;
      }

      .logo {
        width: 150px;
        margin-bottom: 10px;
      }

      .logo2 {
        width: 80px;
        margin-bottom: 20px;
      }

      .title {
        font-size: 32px;
        font-weight: bold;
        color: #262262;
      }

      .subtitle {
        color: #262262;
        font-weight: bold;
        margin-top: 5px;
      }

      .info {
        margin: 8px 0;
        color: #262262;
        line-height: 1.4;
      }

      .button {
        margin-top: 20px;
        padding: 12px 0;
        background-color: #4a90e2;
        color: white;
        border: none;
        border-radius: 9999px;
        cursor: pointer;
        font-size: 16px;
        width: 80%;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        transition: background-color 0.3s ease;
      }

      .button:hover {
        background-color: #367bd6;
      }

      .quote {
        margin-top: 20px;
        color: #262262;
        font-size: 36px;
        line-height: 1.4;
      }
      .row-me {
        --bs-gutter-x: 1.5rem;
        --bs-gutter-y: 0;
        display: flex;
        flex-wrap: wrap;
        margin-top: calc(-1 * var(--bs-gutter-y));
        margin-right: calc(-0.5 * var(--bs-gutter-x));
        margin-left: calc(-0.5 * var(--bs-gutter-x));
      }

      .hitden-me {
        overflow: hidden;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0);
        transition: transform 0.3s ease;
      }

      .img55 {
        width: 250px;
        height: 300px;
        object-fit: cover;
        border-radius: 10px;
      }

      .margin-me {
        margin-top: 500px;
      }

      .text-color-me {
        color: #ffffff;
      }

      .graff {
        display: flex;
        width: 100%;
        height: 400px;
        background-color: #ffffff;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
      }
    </style>
  </head>
  <body>
    <div class="container px-4 py-5" id="featured-3">
      <h2 class="pb-2 border-bottom text-color-me">Singer of the Year</h2>
      <div class="card-me row g-4 py-5 row-cols-1 row-cols-lg-3">
        <div class="feature col">
          <div class="overlayBox">
            <img src="/frontend/img/pp.jpg" alt="img" class="img55" id="img" />
          </div>
          <h3 class="fs-2 text-body-emphasis">few</h3>
          <h4>คะแนน : <span id="num1"></span></h4>
        </div>
        <div class="feature col">
          <div class="overlayBox">
            <img
              src="https://i.pinimg.com/236x/a3/53/5c/a3535c35feab16c8d768921a7b43893b.jpg"
              alt=""
              class="img55"
              id="img2"
            />
          </div>
          <h3 class="fs-2 text-body-emphasis">few2</h3>
          <h4>คะแนน : <span id="num2"></span></h4>
        </div>
        <div class="feature col">
          <div class="overlayBox"></div>
          <img
            src="https://scontent.fbkk5-8.fna.fbcdn.net/v/t1.15752-9/257932028_898720947434545_3904082265459623298_n.jpg?stp=dst-jpg_s480x480_tt6&_nc_cat=106&ccb=1-7&_nc_sid=0024fc&_nc_eui2=AeEXNinV86HbNsMegQKhjeb2YHRFxmTfu_xgdEXGZN-7_De6ND-8wui1clg7NdDinUfBTP5-XRivAObri1CgeawO&_nc_ohc=xpsk0WyRhYAQ7kNvwH9pLh2&_nc_oc=AdnVZ03ETMq1hCK3qbFGPdTNcvdPisFTHmt344RxwT9O6r7bQaesk-bUEMEDU2Pl8KE&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.fbkk5-8.fna&oh=03_Q7cD2QG2F9wFE9ddN-qSopyA5M1kzE6BBXmpU2N2UHaxZSoVvw&oe=6849426D"
            alt=""
            class="img55"
            id="img3"
          />
          <h3 class="fs-2 text-body-emphasis">few3</h3>
          <h4>คะแนน : <span id="num3"></span></h4>
        </div>
        <div></div>
        <div class="text-center">
          <button id="stopBtn" class="btn button">Stop moving</button>
        </div>
        <div class="text-center">
          <button
            id="sortBtn"
            class="button"
            onclick="window.location.href='DashboardUserVoteWhoAreHe copy.html'"
          >
            Overlapping singers
          </button>
        </div>
        <!-- <div class="graff"></div> -->

        <!-- <canvas id="imgChart" width="400" height="200" class="graff"></canvas> -->
        <canvas id="myChart" width="400" height="200"></canvas>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

        <script>
          function randnum1() {
            const randomNumber = Math.floor(Math.random() * 870) + 1;
            document.getElementById("num1").textContent = randomNumber;
          }
          randnum1();
          function randnum2() {
            const randomNumber = Math.floor(Math.random() * 870) + 1;
            document.getElementById("num2").textContent = randomNumber;
          }
          randnum2();
          function randnum3() {
            const randomNumber = Math.floor(Math.random() * 870) + 1;
            document.getElementById("num3").textContent = randomNumber;
          }
          randnum3();

          const ctx = document.getElementById("myChart").getContext("2d");
          const myChart = new Chart(ctx, {
            type: "bar",
            data: {
              labels: ["few", "few2", "few3"],
              datasets: [
                {
                  label: "ผลโหวต",
                  data: [randnum1(), randnum2(), randnum3()],
                  backgroundColor: "rgba(54, 162, 235, 0.5)",
                  borderColor: "rgba(54, 162, 235, 1)",
                  borderWidth: 1,
                },
              ],
            },
            options: {
              indexAxis: "y",
              responsive: true,
              scales: {
                x: {
                  beginAtZero: true,
                },
              },
            },
          });

          // *******************************************************************************************************************
          // สมมติฟังก์ชันสุ่มคะแนน
  //         function randnum1() {
  //           return Math.floor(Math.random() * 1000);
  //         }
  //         function randnum2() {
  //           return Math.floor(Math.random() * 1000);
  //         }
  //         function randnum3() {
  //           return Math.floor(Math.random() * 1000);
  //         }

  //         let singers = [
  //           {
  //             name: "few",
  //             img: "/frontend/img/pp.jpg",
  //             score1: randnum1(),
  //             score2: randnum2(),
  //             score3: randnum3(),
  //           },
  //           {
  //             name: "few2",
  //             img: "https://i.pinimg.com/236x/a3/53/5c/a3535c35feab16c8d768921a7b43893b.jpg",
  //             score1: randnum1(),
  //             score2: randnum2(),
  //             score3: randnum3(),
  //           },
  //           {
  //             name: "few3",
  //             img: "https://scontent.fbkk5-8.fna.fbcdn.net/v/t1.15752-9/257932028_898720947434545_3904082265459623298_n.jpg",
  //             score1: randnum1(),
  //             score2: randnum2(),
  //             score3: randnum3(),
  //           },
  //         ];

  //         // ฟังก์ชัน render นักร้อง + คะแนนสูงสุดจาก 3 ค่า
  //         function renderSingers() {
  //           // คำนวณคะแนนสูงสุดของแต่ละคนเก็บใน key 'score'
  //           singers.forEach((singer) => {
  //             singer.score = Math.max(
  //               singer.score1 || 0,
  //               singer.score2 || 0,
  //               singer.score3 || 0
  //             );
  //           });

  //           // เรียงตามคะแนน 'score' จากมากไปน้อย
  //           singers.sort((a, b) => b.score - a.score);

  //           const container = document.querySelector(".graff");
  //           container.innerHTML = singers
  //             .map(
  //               (singer) => `
  //   <div class="feature">
  //     <img src="${singer.img}" alt="${singer.name}" class="img55" />
  //     <h3>${singer.name}</h3>
  //     <h4>คะแนน : ${singer.score}</h4>
  //   </div>
  // `
  //             )
  //             .join("");
  //         }

  //         // ฟังก์ชันอัพเดตคะแนนใหม่ทุกตัว
  //         function updateData() {
  //           singers.forEach((s) => {
  //             s.score1 = randnum1();
  //             s.score2 = randnum2();
  //             s.score3 = randnum3();
  //           });
  //           renderSingers();
  //         }

          // เรียกครั้งแรก
          // renderSingers();

          // ******************************************************************************************************************
          let intervalId = setInterval(updateData, 1000);
          let isRunning = true;
          let isSorted = true;

          function updateData() {
            let img = document.getElementById("img");
            img.src = "/frontend/img/pp.jpg";
            let img2 = document.getElementById("img2");
            img2.src =
              "https://i.pinimg.com/236x/a3/53/5c/a3535c35feab16c8d768921a7b43893b.jpg";
            let img3 = document.getElementById("img3");
            img3.src =
              "https://scontent.fbkk5-8.fna.fbcdn.net/v/t1.15752-9/257932028_898720947434545_3904082265459623298_n.jpg?stp=dst-jpg_s480x480_tt6&_nc_cat=106&ccb=1-7&_nc_sid=0024fc&_nc_eui2=AeEXNinV86HbNsMegQKhjeb2YHRFxmTfu_xgdEXGZN-7_De6ND-8wui1clg7NdDinUfBTP5-XRivAObri1CgeawO&_nc_ohc=xpsk0WyRhYAQ7kNvwH9pLh2&_nc_oc=AdnVZ03ETMq1hCK3qbFGPdTNcvdPisFTHmt344RxwT9O6r7bQaesk-bUEMEDU2Pl8KE&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.fbkk5-8.fna&oh=03_Q7cD2QG2F9wFE9ddN-qSopyA5M1kzE6BBXmpU2N2UHaxZSoVvw&oe=6849426D";
            randomNumber = Math.floor(Math.random() * 870) + 1;
            document.getElementById("num1").textContent = randomNumber;
            randomNumber2 = Math.floor(Math.random() * 870) + 1;
            document.getElementById("num2").textContent = randomNumber2;
            randomNumber3 = Math.floor(Math.random() * 870) + 1;
            document.getElementById("num3").textContent = randomNumber3;

            const rawData = [
              { label: "few", value: randomNumber },
              { label: "few2", value: randomNumber2 },
              { label: "few3", value: randomNumber3 },
            ];

            if (isSorted) {
              rawData.sort((a, b) => b.value - a.value);
            }

            myChart.data.labels = rawData.map((item) => item.label);
            myChart.data.datasets[0].data = rawData.map((item) => item.value);
            myChart.update();
          }

          document.getElementById("stopBtn").addEventListener("click", () => {
            if (isRunning) {
              clearInterval(intervalId);
              document.getElementById("stopBtn").textContent = "Start moving";
            } else {
              intervalId = setInterval(updateData, 5000);
              document.getElementById("stopBtn").textContent = "Stop moving";
            }
            isRunning = !isRunning;
          });
        </script>
      </div>
    </div>
  </body>
</html>
